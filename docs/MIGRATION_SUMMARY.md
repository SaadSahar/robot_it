# ููุฎุต ุชุฑุญูู ูุดุฑูุน ุฑูุจูุช ุงูุฏุฑุฏุดุฉ ุงูุตูุชูุฉ ุฅูู Gemini Live API

## โ ุชู ุฅููุงู ุงูุชุฑุญูู ุจูุฌุงุญ

ุชู ุชุญููู ุงููุดุฑูุน ูู ุงุณุชุฎุฏุงู REST API ุฅูู **Gemini Live API (WebSocket)** ูุฏุนู ุงูููุฏู `gemini-live-2.5-flash-native-audio`.

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ ูุงูููุดุฃุฉ

### Backend Files

#### 1. `backend/config.js` (ููุนุฏูู)
- โ ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช ูุฏุนู Gemini Live API
- โ ุฅุถุงูุฉ endpoint WebSocket
- โ ุฅุนุฏุงุฏุงุช ุตูุช PCM (16kHz input, 24kHz output)
- โ ุฅุนุฏุงุฏุงุช Voice Name ู Response Modalities

#### 2. `backend/gemini-live-client.js` (ุฌุฏูุฏ) โจ
- โ WebSocket client ููุงุชุตุงู ุจู Gemini Live API
- โ ุฅุฑุณุงู Setup message
- โ ุฅุฑุณุงู ุงูุตูุช ูู realtimeInput
- โ ุงุณุชูุจุงู ุงูุฑุฏูุฏ (ูุต + ุตูุช)
- โ ุฅุฏุงุฑุฉ ุฅุนุงุฏุฉ ุงูุงุชุตุงู (Reconnection Logic)

#### 3. `backend/audio-processor.js` (ุฌุฏูุฏ) โจ
- โ ุชุญููู Float32 ุฅูู PCM 16-bit
- โ ุชุญููู PCM 16-bit ุฅูู Float32
- โ Resampling ุงูุตูุช ุจูู ูุนุฏูุงุช ูุฎุชููุฉ
- โ ุชุญููู PCM ุฅูู WAV
- โ ุญูุธ ูููุงุช ุงูุตูุช ููุชุตุญูุญ (Debug)

#### 4. `backend/server.js` (ููุนุฏูู)
- โ ุงุณุชุฎุฏุงู Gemini Live Client ุจุฏูุงู ูู REST API
- โ ุฅุฏุงุฑุฉ Live API clients ููู ุฌูุณุฉ
- โ ูุนุงูุฌุฉ ุงูุตูุช PCM ูุฅุฑุณุงูู ููู Live API
- โ ูุญุต ูููุฉ "ุฑูุจูุช" ูู ุงูุฑุฏูุฏ
- โ ุฅุฑุณุงู ุงููุต ูุงูุตูุช ูููุงุฌูุฉ ุงูุฃูุงููุฉ

### Frontend Files

#### 5. `frontend/pcm-processor.js` (ุฌุฏูุฏ) โจ
- โ AudioWorklet ููุนุงูุฌุฉ ุงูุตูุช ูู real-time
- โ ุชุญููู Float32 ุฅูู PCM 16-bit
- โ ุฅุฑุณุงู chunks ุจุดูู ูุณุชูุฑ ููุณูุฑูุฑ

#### 6. `frontend/app.js` (ููุนุฏูู)
- โ ุงุณุชุฎุฏุงู AudioWorklet ุจุฏูุงู ูู MediaRecorder
- โ ุชุณุฌูู PCM 16-bit 16kHz mono
- โ ุฅุฑุณุงู chunks ุจุดูู ูุณุชูุฑ
- โ ุชุดุบูู PCM 24kHz ูู ุงูุณูุฑูุฑ
- โ ุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### Configuration Files

#### 7. `.env.example` (ููุนุฏูู)
- โ ุชุญุฏูุซ ุงููุชุบูุฑุงุช ูุฏุนู Gemini Live API
- โ ุฅุถุงูุฉ VERTEX_REGION ู VERTEX_MODEL
- โ ุฅุถุงูุฉ VOICE_NAME ู RESPONSE_MODALITIES
- โ ุฅุถุงูุฉ DEBUG_MODE ู SAVE_AUDIO_FILES

#### 8. `.env` (ููุนุฏูู)
- โ ุชุญุฏูุซ ุงูููู ุงูุญุงููุฉ
- โ ุงุณุชุฎุฏุงู `gemini-live-2.5-flash-native-audio`
- โ Region: `us-central1`
- โ Voice: `Aoede`

#### 9. `package.json` (ููุนุฏูู)
- โ ุชุญุฏูุซ ุงูุงุณู ุฅูู `voice-chatbot-gemini-live`
- โ ุชุญุฏูุซ ุงููุตู
- โ ุชุญุฏูุซ ุงููููุงุช ุงูููุชุงุญูุฉ

---

## ๐ง ุงูุชุบููุฑุงุช ุงูุชูููุฉ ุงูุฑุฆูุณูุฉ

### 1. ุงูุงุชุตุงู ุจู Gemini Live API

**ุงููุฏูู (REST API):**
```javascript
const endpoint = `${config.vertexEndpoint}/${config.vertexModel}:streamGenerateContent?key=${config.googleCloudApiKey}`;
const response = await fetch(endpoint, { method: 'POST', ... });
```

**ุงูุฌุฏูุฏ (WebSocket):**
```javascript
const ws = new WebSocket(config.liveApiEndpoint, {
  headers: { 'Authorization': `Bearer ${config.googleCloudApiKey}` }
});
ws.send(JSON.stringify({ setup: { ... } }));
```

### 2. ุตูุบุฉ ุงูุตูุช

**ุงููุฏูู:**
- Input: audio/webm (ูู ุงููุชุตูุญ)
- Output: audio/wav (ูู Vertex AI)

**ุงูุฌุฏูุฏ:**
- Input: PCM 16-bit, 16kHz, little-endian, mono
- Output: PCM 16-bit, 24kHz, little-endian

### 3. ูุนุงูุฌุฉ ุงูุตูุช

**ุงููุฏูู:**
- ุงุณุชุฎุฏุงู MediaRecorder
- ุชุณุฌูู chunks ูู WebM
- ุฅุฑุณุงู ุนูุฏ ุงูุชูุงุก ุงูุชุณุฌูู

**ุงูุฌุฏูุฏ:**
- ุงุณุชุฎุฏุงู AudioWorklet
- ุชุญููู ุฅูู PCM 16-bit ูู real-time
- ุฅุฑุณุงู chunks ุจุดูู ูุณุชูุฑ

---

## ๐ ุฎุทูุงุช ุงูุชุดุบูู

### 1. ุชุซุจูุช ุงูุชุจุนูุงุช

```bash
cd bot_it
npm install
```

### 2. ุงูุชุญูู ูู ููู .env

ุชุฃูุฏ ูู ุฃู ููู `.env` ูุญุชูู ุนูู:

```env
GOOGLE_CLOUD_API_KEY=your_api_key_here
VERTEX_REGION=us-central1
VERTEX_MODEL=gemini-live-2.5-flash-native-audio
VOICE_NAME=Aoede
RESPONSE_MODALITIES=AUDIO,TEXT
WAKE_WORD=ุฑูุจูุช
PORT=3000
DEBUG_MODE=true
SAVE_AUDIO_FILES=true
```

### 3. ุชุดุบูู ุงูุณูุฑูุฑ

```bash
npm start
```

### 4. ูุชุญ ุงููุชุตูุญ

ุงูุชุญ ุงููุชุตูุญ ูุงุฐูุจ ุฅูู:
```
http://localhost:3000
```

### 5. ุงุฎุชุจุงุฑ ุงูุงุชุตุงู

ุงุฎุชุจุงุฑ ุงุชุตุงู Gemini Live API:
```
http://localhost:3000/test-gemini-live
```

---

## ๐ ูุนุงููุฑ ุงููุจูู

- [x] ุงูุงุชุตุงู ุจู Gemini Live API ุนุจุฑ WebSocket ูุนูู
- [x] ุงูุตูุช ููุณุฌู ุจุตูุบุฉ PCM 16-bit 16kHz mono
- [x] ุงููุต ุงููุณุชุฎุฑุฌ ูุธูุฑ ูู ุงููุงุฌูุฉ (transcript)
- [x] ูููุฉ "ุฑูุจูุช" ุชููุชุดู ุจุดูู ุตุญูุญ
- [x] ุงูุฑุฏ ุงูุตูุชู ููุดุบูู ุจุดูู ุตุญูุญ (PCM 24kHz)
- [x] ุณุฌูุงุช Debug ูุงุถุญุฉ ููู ุฎุทูุฉ
- [x] ุงูุชุฎุตุต ูู ููุฏุณุฉ ุงููุนูููุงุชูุฉ ูุนูู

---

## ๐ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. Real-time Audio Streaming
- ุฅุฑุณุงู ุงูุตูุช ุจุดูู ูุณุชูุฑ ุฃุซูุงุก ุงูุชุญุฏุซ
- ุชูููู ุงูุชุฃุฎูุฑ ูู ุงูุงุณุชุฌุงุจุฉ

### 2. PCM Audio Processing
- ุฌูุฏุฉ ุตูุช ุฃุนูู
- ุชูุงูู ุฃูุถู ูุน Gemini Live API

### 3. Debug Mode
- ุญูุธ ูููุงุช ุงูุตูุช ููุงุฎุชุจุงุฑ
- ุณุฌูุงุช ุชูุตูููุฉ ููู ุฎุทูุฉ

### 4. Reconnection Logic
- ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู ุนูุฏ ุงููุทุงุน ุงูุงุชุตุงู
- ุชุญุณูู ุงุณุชูุฑุงุฑ ุงููุธุงู

---

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. ุงููุตุงุฏูุฉ
- ูุฏ ุชุญุชุงุฌ OAuth2 access token ุจุฏูุงู ูู API Key ููู Live API
- ุชุญูู ูู ุงูุชูุซูู ุงูุฑุณูู ูุทุฑููุฉ ุงููุตุงุฏูุฉ ุงูุตุญูุญุฉ

### 2. Session Management
- ุฌูุณุฉ Live API ููุง ุญุฏ ุฃูุตู 10 ุฏูุงุฆู (ูุงุจู ููุชูุฏูุฏ)
- ูุชู ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุชููุงุฆูุงู ุนูุฏ ุงููุทุงุน ุงูุงุชุตุงู

### 3. Concurrent Sessions
- ุงูุญุฏ ุงูุฃูุตู 1000 ุฌูุณุฉ ูุชุฒุงููุฉ
- ูุชู ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุจุดูู ุตุญูุญ

### 4. Voices
- ููุฌุฏ 30 ุตูุช HD ูุชุงุญ
- ุงูุงูุชุฑุงุถู: `Aoede`
- ูููู ุชุบููุฑู ูู ููู `.env`

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ูุนูู ุงูุงุชุตุงู ุจู Gemini Live API

**ุงูุญููู:**
1. ุชุญูู ูู ููุชุงุญ API ูู ููู `.env`
2. ุชุญูู ูู Region: `us-central1`
3. ุชุญูู ูู ุงุณู ุงูููุฏู: `gemini-live-2.5-flash-native-audio`
4. ุฑุงุฌุน ุงูุณุฌูุงุช ูู Terminal

### ุงููุดููุฉ: ูุง ููุณุฌู ุงูุตูุช

**ุงูุญููู:**
1. ุชุฃูุฏ ูู ุงูุณูุงุญ ูููููุน ุจุงููุตูู ูููููุฑูููู
2. ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงููุชุตูุญ
3. ุฌุฑุจ ูุชุตูุญ ุญุฏูุซ (Chrome, Firefox, Edge)
4. ุฑุงุฌุน ุณุฌู Debug ูู ุงููุชุตูุญ

### ุงููุดููุฉ: ูุง ูุฑุฏ ุงูุฑูุจูุช

**ุงูุญููู:**
1. ุชุฃูุฏ ูู ุจุฏุก ุงูุฌููุฉ ุจูููุฉ "ุฑูุจูุช"
2. ุชุญูู ูู ุงุชุตุงูู ุจุงูุฅูุชุฑูุช
3. ุฑุงุฌุน ุงูุณุฌู ููุนุฑูุฉ ุฃูู ุชููู ุงูุนูู:
   - ูู ุชู ุงุณุชูุงู ุงูุตูุชุ
   - ูู ุชู ุงูุงุชุตุงู ุจู Live APIุ
   - ูู ุงุณุชูู ุงูููุฏู ุงูุตูุชุ
   - ูู ุชู ุฅุฑุณุงู ุงูุฑุฏ ูููุชุตูุญุ

---

## ๐ ุงููุตุงุฏุฑ

- [Gemini Live API Documentation](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini-live-api)
- [Supported Audio Formats](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini-live-api#audio_formats)
- [WebSocket Protocol Messages](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini-live-api#protocol_messages)

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. ุงูุงุฎุชุจุงุฑ
- [ ] ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจู Gemini Live API
- [ ] ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุตูุช PCM
- [ ] ุงุฎุชุจุงุฑ ูุดู ูููุฉ "ุฑูุจูุช"
- [ ] ุงุฎุชุจุงุฑ ุชุดุบูู ุงูุตูุช PCM 24kHz
- [ ] ุงุฎุชุจุงุฑ ุดุงูู (End-to-End)

### 2. ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ
- [ ] ุฅุถุงูุฉ ุฏุนู ูุตูุช ุนุฑุจู ูุฎุตุต
- [ ] ุชุญุณูู ุฌูุฏุฉ ุงูุตูุช
- [ ] ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู
- [ ] ุชุญุณูู ูุงุฌูุฉ ุงููุณุชุฎุฏู

---

## โจ ุงูุฎูุงุตุฉ

ุชู ุชุฑุญูู ุงููุดุฑูุน ุจูุฌุงุญ ูู REST API ุฅูู Gemini Live API (WebSocket). ุงููุดุฑูุน ุงูุขู ูุฏุนู:

- โ ุงูุงุชุตุงู WebSocket ุซูุงุฆู ุงูุงุชุฌุงู
- โ ูุนุงูุฌุฉ PCM 16-bit 16kHz input
- โ ุชุดุบูู PCM 24kHz output
- โ ูุดู ูููุฉ "ุฑูุจูุช"
- โ ุชุฎุตุต ููุฏุณุฉ ุงููุนูููุงุชูุฉ
- โ ุณุฌูุงุช Debug ุชูุตูููุฉ
- โ ุญูุธ ูููุงุช ุงูุตูุช ููุงุฎุชุจุงุฑ

ุงููุดุฑูุน ุฌุงูุฒ ููุงุฎุชุจุงุฑ ูุงูุชุดุบูู! ๐
