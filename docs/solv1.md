Prompt ูุชุดุฎูุต ูุญู ูุดููุฉ ุนุฏู ุงูุฑุฏ
markdownDownloadCopy code# ๐ง ูููุฉ: ุชุดุฎูุต ูุญู ูุดููุฉ ุนุฏู ุงุณุชุฌุงุจุฉ ุฑูุจูุช ุงูุฏุฑุฏุดุฉ ุงูุตูุชูุฉ

## ๐ ูุตู ุงููุดููุฉ

ุงููุดุฑูุน ูุนูู ุฌุฒุฆูุงู:
- โ ุงููุงุฌูุฉ ุชุณุฌู ุงูุตูุช ุจูุฌุงุญ
- โ ุงูุตูุช ููุฑุณู ููุณูุฑูุฑ (30 chunk)
- โ ูุง ููุฌุฏ ุฑุฏ ุตูุชู ุฃู ูุตู ูู ุงูุฑูุจูุช
- โ ูุง ุฃุนุฑู ูู ุชู ุงูุชุนุฑู ุนูู ูููุฉ "ุฑูุจูุช" ุฃู ูุง
- โ ูุง ุฃุนุฑู ูุง ุงููุต ุงูุฐู ูููู ุงูููุฏู ูู ุตูุชู

## ๐ฏ ุงููุทููุจ

### 1. ุฅุถุงูุฉ ุณุฌูุงุช ุชุตุญูุญ ุดุงููุฉ (Debug Logs)

ุฃุถู ุณุฌูุงุช ุชูุตูููุฉ ูู **gemini-handler.js** ู **server.js** ุชูุธูุฑ:

#### ูู ูุฑุญูุฉ ูุดู ูููุฉ ุงูุชูุจูู (Wake Word Detection):
๐ [WAKE] ุงูุตูุช ุงููุณุชูู: {ุญุฌู ุงูุจูุงูุงุช} bytes
๐ค [WAKE] ุฅุฑุณุงู ุทูุจ ุฅูู Vertex AI...
๐ค [WAKE] URL: {ุงูุฑุงุจุท ุงููุงูู}
๐ค [WAKE] Payload size: {ุญุฌู ุงูุทูุจ}
๐ฅ [WAKE] Response Status: {ููุฏ ุงูุญุงูุฉ}
๐ฅ [WAKE] Response Headers: {ุงูููุฏุฑุฒ}
๐ฅ [WAKE] Response Body (raw): {ุฃูู 500 ุญุฑู}
๐ [WAKE] ุงููุต ุงููุณุชุฎุฑุฌ ูู ุงูุตูุช: "{ุงููุต ุงูุฐู ูููู ุงูููุฏู}"
๐ [WAKE] ูุชูุฌุฉ ุงููุดู: wake={true/false}, reason="{ุงูุณุจุจ}"

#### ูู ูุฑุญูุฉ ุชูููุฏ ุงูุฑุฏ (Response Generation):

๐ค [RESPONSE] ุฅุฑุณุงู ุทูุจ ุงูุฑุฏ ุงูุตูุชู...
๐ฅ [RESPONSE] Response Status: {ููุฏ ุงูุญุงูุฉ}
๐ฅ [RESPONSE] Response Body type: {ููุน ุงูุจูุงูุงุช}
๐ฅ [RESPONSE] ูู ููุฌุฏ ุตูุช ูู ุงูุฑุฏ: {yes/no}
๐ฅ [RESPONSE] ุญุฌู ุงูุตูุช: {bytes}
๐ค [RESPONSE] ุฅุฑุณุงู ุงูุตูุช ููุนููู...

#### ูู ุญุงูุฉ ุงูุฃุฎุทุงุก:

โ [ERROR] ูุฑุญูุฉ: {wake/response}
โ [ERROR] ููุน ุงูุฎุทุฃ: {error.name}
โ [ERROR] ุฑุณุงูุฉ: {error.message}
โ [ERROR] Response body: {ุงูุฑุฏ ุงููุงูู ูู API}

### 2. ุฅุฑุณุงู ูุนูููุงุช ุงูุชุตุญูุญ ูููุงุฌูุฉ

ุนุฏูู ุงูุณูุฑูุฑ ููุฑุณู ูููุงุฌูุฉ ุฑุณุงุฆู debug ุนุจุฑ WebSocket:

```javascript
// ุฃุฑุณู ููุนููู ูุง ูุญุฏุซ
ws.send(JSON.stringify({
    type: 'debug',
    stage: 'wake_detection',
    data: {
        transcript: "ุงููุต ุงููุณุชุฎุฑุฌ ูู ุงูุตูุช",
        wakeWordDetected: true/false,
        rawResponse: "ุฃูู 200 ุญุฑู ูู ุฑุฏ API"
    }
}));

3. ุนุฑุถ ูุนูููุงุช ุงูุชุตุญูุญ ูู ุงููุงุฌูุฉ
ุนุฏูู app.js ููุนุฑุถ ุฑุณุงุฆู debug ูู ููุญุฉ ุงูุชุตุญูุญ:
javascriptDownloadCopy codecase 'debug':
    addDebugLog(`๐ [${data.stage}] transcript: "${data.data.transcript}"`);
    addDebugLog(`๐ [${data.stage}] wake detected: ${data.data.wakeWordDetected}`);
    break;
4. ูุญุต ูุฅุตูุงุญ ุงููุดุงูู ุงููุญุชููุฉ
ุชุญูู ูู ูุฐู ุงูููุงุท:
ุฃ) ุตูุบุฉ ุงูุตูุช:

* ูู ุตูุบุฉ ุงูุตูุช ุงููุฑุณู ุตุญูุญุฉุ
* ูู mime_type ุตุญูุญ (audio/webm, audio/wav, etc)ุ
* ุฃุถู log ููุถุญ ุงูุตูุบุฉ ุงููุณุชุฎุฏูุฉ

ุจ) ุชุฌููุน ุงูู chunks:

* ูู ูุชู ุชุฌููุน ูู ุงูู chunks ูุจู ุงูุฅุฑุณุงูุ
* ุฃุถู log ููุถุญ ุงูุญุฌู ุงูููู ููุตูุช ุงููุฌูุน

ุฌ) Endpoint ุงูุตุญูุญ:

* ุชุฃูุฏ ุฃู ุงูู endpoint ูุฏุนู audio input
* ุฌุฑุจ ูููุฐุฌ gemini-2.5-flash ุฅุฐุง ูุงู ุงููููุฐุฌ ุงูุญุงูู ูุง ูุนูู

ุฏ) ุงูุทูุจ ุฅูู Vertex:

* ุงุทุจุน ุงูู payload ุงููุงูู (ุจุฏูู base64 data) ูุจู ุงูุฅุฑุณุงู
* ุงุทุจุน ุงูู response ุงููุงูู

5. ุฅุถุงูุฉ Fallback ููุชุดุฎูุต
ุฃุถู endpoint ุงุฎุชุจุงุฑู /test-vertex ูุฑุณู ูุต ุจุณูุท ููุชุญูู ูู ุนูู API:
javascriptDownloadCopy codeapp.get('/test-vertex', async (req, res) => {
    // ุงุฎุชุจุงุฑ ุจุณูุท: ุฃุฑุณู ูุต ูุงุณุชูุจู ุฑุฏ
    // ูุฐุง ูุชุญูู ูู ุตุญุฉ API key ูุงูุงุชุตุงู
});

๐ ุงููููุงุช ุงููุทููุจ ุชุนุฏูููุง

1. backend/gemini-handler.js - ุฅุถุงูุฉ ุณุฌูุงุช ุดุงููุฉ
2. backend/server.js - ุฅุฑุณุงู debug ูููุงุฌูุฉ
3. frontend/app.js - ุนุฑุถ debug messages
4. frontend/index.html - ุชุญุณูู ููุญุฉ ุงูุชุตุญูุญ (ุงุฎุชูุงุฑู)


โ ูุนุงููุฑ ุงููุจูู
ุจุนุฏ ุงูุชุนุฏููุ ูุฌุจ ุฃู ุฃุฑู ูู ุงูุณุฌูุงุช:

1.  ุงููุต ุงูุฐู ูููู ุงูููุฏู ูู ุตูุชู
2.  ูู ุชู ุงูุชุดุงู ูููุฉ "ุฑูุจูุช" ูููุงุฐุง ูุนู/ูุง
3.  ููุฏ ุญุงูุฉ HTTP ูู Vertex API
4.  ุฑุณุงูุฉ ุงูุฎุทุฃ ุฅู ูุฌุฏุช
5.  ูู ุงููุงุฌูุฉ: ุนุฑุถ ุงููุต ุงููุณุชุฎุฑุฌ ูู ุงูุตูุช


๐ ุณููุงุฑูู ุงูุงุฎุชุจุงุฑ
ุจุนุฏ ุงูุชุนุฏูู ุณุฃููู: "ุฑูุจูุช ูุง ูู ูุบุฉ ุจุงูุซูู"
ุงููุชูุฌุฉ ุงููุชููุนุฉ ูู ุงูุณุฌูุงุช:
๐ [WAKE] ุงููุต ุงููุณุชุฎุฑุฌ: "ุฑูุจูุช ูุง ูู ูุบุฉ ุจุงูุซูู"
๐ [WAKE] ูุชูุฌุฉ: wake=true
๐ค [RESPONSE] ุฅุฑุณุงู ุทูุจ ุงูุฑุฏ...
๐ฅ [RESPONSE] ุชู ุงุณุชูุงู ุฑุฏ ุตูุชู: 15000 bytes
๐ค [RESPONSE] ุฅุฑุณุงู ููุนููู...

ุฃู ูู ุญุงูุฉ ุงูุฎุทุฃ:
๐ [WAKE] ุงููุต ุงููุณุชุฎุฑุฌ: "" (ูุงุฑุบ)
โ [ERROR] ูู ูุชู ุงูุชุนุฑู ุนูู ุงูุตูุช
โ [ERROR] Response: {"error": "..."}


๐ก ููุงุญุธุงุช ุฅุถุงููุฉ

* ูุง ุชุญุฐู ุฃู ููุฏ ููุฌูุฏุ ููุท ุฃุถู ุงูุณุฌูุงุช
* ุงุฌุนู ุงูุณุฌูุงุช ูุงุถุญุฉ ููุฑุชุจุฉ ุจุงูุฃููุงู/ุงูุฑููุฒ
* ุฃุฑุณู ูู ุงููููุงุช ุงููุนุฏูุฉ ูุงููุฉ
* ุฅุฐุง ุงูุชุดูุช ุงููุดููุฉ ุฃุซูุงุก ุงููุญุตุ ุฃุตูุญูุง ูุจุงุดุฑุฉ

ุงุจุฏุฃ ุจุชุญููู ุงูููุฏ ุงูุญุงูู ุซู ุฃุถู ุงูุณุฌูุงุช ุงููุทููุจุฉ.

---

ูุฐุง ุงูู Prompt ุณูุณุงุนุฏ ุงูู Agent ุนูู:
1. ุฅุถุงูุฉ ุณุฌูุงุช ุชูุตูููุฉ ููู ุฎุทูุฉ
2. ุฅุธูุงุฑ ุงููุต ุงููุณุชุฎุฑุฌ ูู ุตูุชู
3. ุชุญุฏูุฏ ุฃูู ุชุญุฏุซ ุงููุดููุฉ ุจุงูุถุจุท
4. ุงูุชุฑุงุญ ุงูุญู ุงูููุงุณุจ