# ๐ค ุฑูุจูุช ุงูุฏุฑุฏุดุฉ ุงูุตูุชูุฉ | Voice Chatbot

ูุณุงุนุฏ ุตูุชู ุฐูู ูุชุฎุตุต ูู ููุฏุณุฉ ุงููุนูููุงุชูุฉ ูุนููู ุงูุญุงุณุจุ ูุณุชุฎุฏู Web Speech API ูุชุญููู ุงูุตูุช ุฅูู ูุต ูู ุงููุชุตูุญุ ู Gemini Live API ูุชูููุฏ ุงูุฑุฏูุฏ ุงูุตูุชูุฉ ูุงููุตูุฉ.

A smart voice assistant specialized in computer science and information engineering, using Web Speech API for speech-to-text in the browser, and Gemini Live API for text-to-speech responses.

## โจ ุงููููุฒุงุช | Features

- ๐ค **ุชุญููู ุตูุช ุฅูู ูุต ูู ุงููุชุตูุญ** - ูุณุชุฎุฏู Web Speech API (SpeechRecognition)
- ๐ค **ุฑุฏูุฏ ุตูุชูุฉ ุทุจูุนูุฉ** - Gemini Live API ูุน ุตูุช PCM 24kHz ุนุงูู ุงูุฌูุฏุฉ
- ๐ฏ **ูููุฉ ุชูุจูู (Wake Word)** - ุงูุฑูุจูุช ูุฑุฏ ููุท ุนูุฏ ุจุฏุก ุงูุณุคุงู ุจู "ุฑูุจูุช"
- ๐ **ุฏุนู ุงููุบุชูู** - ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- ๐ **ูุชุฎุตุต ูู ุนููู ุงูุญุงุณุจ** - ูุฑูุถ ุงูุฃุณุฆูุฉ ุฎุงุฑุฌ ุงููุทุงู
- ๐ **ุชุตุญูุญ ุดุงูู** - ุณุฌู debug ููุตู ูููุทูุฑูู
- ๐ **ููุช ูุนูู** - ุงุณุชุฌุงุจุฉ ููุฑูุฉ ูุน ุนุฑุถ ุงููุต ุงููุคูุช

## ๐๏ธ ุงูุจููุฉ ุงููุนูุงุฑูุฉ | Architecture

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         Browser (Client)                        โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ  Web Speech API (SpeechRecognition)                        โ โ
โ  โ  - Audio โ Text (Speech-to-Text)                          โ โ
โ  โ  - Interim + Final transcripts                            โ โ
โ  โ  - Runs entirely in browser                               โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                              โ                                   โ
โ                    WebSocket (JSON)                             โ
โ                    - final_transcript                          โ
โ                    - interim_transcript                        โ
โ                              โ                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                               โ
                               โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      Backend Server (Node.js)                   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ  Wake Word Detection                                       โ โ
โ  โ  - Check if text starts with "ุฑูุจูุช"                      โ โ
โ  โ  - Clean text before sending to AI                        โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                              โ                                   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ  Gemini Live API Client (WebSocket)                       โ โ
โ  โ  - Send text input                                         โ โ
โ  โ  - Receive audio + text output                            โ โ
โ  โ  - PCM 16-bit 24kHz audio streaming                       โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ ุงููุชุทูุจุงุช | Prerequisites

### Backend
- **Node.js** >= 16.0.0
- **npm** ุฃู **yarn**
- **Google Cloud API Key** - ููุญุตูู ุนูู ููุชุงุญ:
  1. ุงุฐูุจ ุฅูู [Google Cloud Console](https://console.cloud.google.com/apis/credentials)
  2. ุฃูุดุฆ ูุดุฑูุน ุฌุฏูุฏ ุฃู ุงุฎุชุฑ ูุดุฑูุน ููุฌูุฏ
  3. ูุนูู **Generative Language API**
  4. ุฃูุดุฆ API Key

### Frontend
- **Google Chrome** ุฃู **Microsoft Edge** (ูุฏุนู Web Speech API)
- ูููุฑูููู ูุชุตู ุจุงูุฌูุงุฒ

## ๐ ุงูุชุซุจูุช ูุงูุชุดุบูู | Installation & Setup

### 1. ุงุณุชูุณุงุฎ ุงููุดุฑูุน | Clone the Repository

```bash
cd bot_it
```

### 2. ุชุซุจูุช ุงูููุชุจุงุช | Install Dependencies

```bash
npm install
```

### 3. ุฅุนุฏุงุฏ ููู ุงูุจูุฆุฉ | Configure Environment

```bash
# ูุณุฎ ููู ุงููุซุงู
copy .env.example .env

# ุชุนุฏูู .env ูุฅุถุงูุฉ ููุงุชูุญ API ุงูุฎุงุตุฉ ุจู
notepad .env  # ุนูู Windows
# ุฃู
nano .env     # ุนูู Linux/Mac
```

**ุฃุถู ุงูููุงุชูุญ ุงูุชุงููุฉ ูู `.env`:**

```env
GOOGLE_CLOUD_API_KEY=your_actual_api_key_here
VERTEX_REGION=us-central1
VERTEX_MODEL=gemini-live-2.5-flash-native-audio
VOICE_NAME=Aoede
WAKE_WORD=ุฑูุจูุช
PORT=3000
DEBUG_MODE=true
```

### 4. ุชุดุบูู ุงูุณูุฑูุฑ | Start the Server

```bash
npm start
```

ุฃู ููุชุทููุฑ ูุน ุฅุนุงุฏุฉ ุงูุชุดุบูู ุงูุชููุงุฆู:

```bash
npm run dev
```

### 5. ูุชุญ ุงูุชุทุจูู | Open the Application

ุงูุชุญ ุงููุชุตูุญ ูุงุฐูุจ ุฅูู:
```
http://localhost:3000
```

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู | How to Use

### ุงูุฎุทูุงุช | Steps

1. **ููุญ ุงูุฅุฐู ูููููุฑูููู** - ุงูุณูุงุญ ุจุงููุตูู ุนูุฏ ุงูุทูุจ
2. **ุงุฎุชูุงุฑ ุงููุบุฉ** - ุงูุนุฑุจูุฉ ุฃู ุงูุฅูุฌููุฒูุฉ
3. **ุงูุถุบุท ูุน ุงูุงุณุชูุฑุงุฑ ุนูู ุฒุฑ ุงููููุฑูููู** - ุงูุจุฏุก ุจุงูุชุญุฏุซ
4. **ููู ุงูุณุคุงู** - ูุฌุจ ุฃู ูุจุฏุฃ ุจู "ุฑูุจูุช"
5. **ุฅููุงุช ุงูุฒุฑ** - ุฅููุงุก ุงูุชุญุฏุซ
6. **ุงูุชุธุงุฑ ุงูุฑุฏ** - ุณูุธูุฑ ุงููุต ููุณูุน ุงูุตูุช

### ุฃูุซูุฉ ุนูู ุงูุฃุณุฆูุฉ | Example Questions

```
โ ุตุญูุญ (ูุน ูููุฉ ุฑูุจูุช):
- "ุฑูุจูุช ูุง ูู ูุบุฉ ุจุงูุซููุ"
- "ุฑูุจูุช ูุง ุงููุฑู ุจูู TCP ู UDPุ"
- "ุฑูุจูุช ูุง ูู ููุงุนุฏ ุงูุจูุงูุงุชุ"
- "ุฑูุจูุช ูุง ูู ุงูุฐูุงุก ุงูุงุตุทูุงุนูุ"

โ ุฎุทุฃ (ุจุฏูู ูููุฉ ุฑูุจูุช):
- "ูุง ูู ูุบุฉ ุจุงูุซููุ" โ ูู ูุชู ุงูุฑุฏ
- "ูุง ูู ุงูุฐูุงุก ุงูุงุตุทูุงุนูุ" โ ูู ูุชู ุงูุฑุฏ
```

## ๐ง ุจุฑูุชูููู WebSocket | WebSocket Protocol

### ูู ุงูุนููู ููุณูุฑูุฑ | Client โ Server

```json
// ูุต ูุคูุช (ุงุฎุชูุงุฑู - ููุนุฑุถ ููุท)
{
  "type": "interim_transcript",
  "text": "ุฑูุจูุช ูุง ูู..."
}

// ูุต ููุงุฆู (ูุญุฏุฏ ุงูุฑุฏ)
{
  "type": "final_transcript",
  "text": "ุฑูุจูุช ูุง ูู ูุบุฉ ุจุงูุซููุ",
  "lang": "ar-SA"
}
```

### ูู ุงูุณูุฑูุฑ ููุนููู | Server โ Client

```json
// ุญุงูุฉ ุงููุธุงู
{
  "type": "status",
  "status": "ready|listening|thinking|speaking|error",
  "message": "ุฌุงูุฒ ููุชุญุฏุซ"
}

// ูุนูููุงุช ูุดู ูููุฉ ุงูุชูุจูู
{
  "type": "wake_debug",
  "wake": true,
  "rawText": "ุฑูุจูุช ูุง ูู ุจุงูุซููุ",
  "cleanText": "ูุง ูู ุจุงูุซููุ",
  "reason": "ุชู ูุดู ูููุฉ ุฑูุจูุช"
}

// ูุต ุงูุฑุฏ
{
  "type": "assistant_text",
  "text": "ุจุงูุซูู ูู ูุบุฉ ุจุฑูุฌุฉ ุนุงููุฉ ุงููุณุชูู..."
}

// ุตูุช ุงูุฑุฏ (PCM chunk)
{
  "type": "assistant_audio",
  "mimeType": "audio/pcm;rate=24000",
  "data": "<base64_encoded_pcm_audio>"
}

// ููุงูุฉ ุงูุฑุฏ
{
  "type": "assistant_done"
}
```

## ๐ต ุชุดุบูู ุตูุช PCM | PCM Audio Playback

ุงูุตูุช ุงููุงุฏู ูู Gemini Live API ุจุตูุบุฉ **PCM 16-bit 24kHz little-endian**.

### ุนูููุฉ ุงูุชุดุบูู | Playback Process

1. **ุงุณุชูุงู Base64** - ุงูุณูุฑูุฑ ูุฑุณู ุงูุตูุช ุจุตูุบุฉ base64
2. **ูู ุงูุชุดููุฑ** - `atob()` ูุชุญููู base64 ุฅูู binary string
3. **ุชุญููู ุฅูู Float32** - ุชูุณูู PCM 16-bit ุฅูู Float32 (-1.0 ุฅูู 1.0)
4. **ุฅูุดุงุก AudioBuffer** - ุจุงุณุชุฎุฏุงู Web Audio API
5. **ุงูุชุดุบูู** - ุนุจุฑ AudioBufferSourceNode

```javascript
// ูุซุงู ูุจุณุท
const base64PCM = "..."; // ูู ุงูุณูุฑูุฑ
const pcmData = atob(base64PCM);
const float32 = new Float32Array(pcmData.length / 2);
for (let i = 0; i < float32.length; i++) {
    float32[i] = (pcmData.charCodeAt(i * 2) | (pcmData.charCodeAt(i * 2 + 1) << 8)) / 32768;
}
const audioBuffer = audioContext.createBuffer(1, float32.length, 24000);
audioBuffer.getChannelData(0).set(float32);
// ุชุดุบูู...
```

## ๐ ุงูุชุตุญูุญ | Debugging

### ุชูุนูู ูุถุน ุงูุชุตุญูุญ | Enable Debug Mode

ูู ููู `.env`:
```env
DEBUG_MODE=true
```

### ููุงูุน ุนุฑุถ ุงูุณุฌูุงุช | Log Locations

1. **Console ุงููุชุตูุญ** - F12 โ Console
2. **Terminal ุงูุณูุฑูุฑ** - ุญูุซ ุชุดุบู `npm start`
3. **Debug Panel** - ูู ุฃุณูู ุตูุญุฉ ุงูููุจ

### ูุนูููุงุช ุงูุชุตุญูุญ ุงููุชููุฑุฉ | Available Debug Info

- ุงููุต ุงููุคูุช (Interim transcript)
- ุงููุต ุงูููุงุฆู (Final transcript)
- ูุชูุฌุฉ ูุดู ูููุฉ ุงูุชูุจูู (Wake word detection)
- ุงููุต ุงูููุธู ุงููุฑุณู ููุฐูุงุก ุงูุงุตุทูุงุนู (Clean text)
- ุฃู ุฃุฎุทุงุก ูู Vertex AI

## โ๏ธ ููุงุญุธุงุช ูููุฉ | Important Notes

### ุฏุนู Web Speech API

- **ูุนูู ุจุดูู ููุชุงุฒ ุนูู**: Google Chrome, Microsoft Edge
- **ูุฏ ูุง ูุนูู ุนูู**: Firefox, Safari
- **ุณุจุจ**: Web Speech API ูู ููุฒุฉ ุชุฌุฑูุจูุฉ ุบูุฑ ูุฏุนููุฉ ูู ุฌููุน ุงููุชุตูุญุงุช

### ุงูุฎุตูุตูุฉ | Privacy

- Web Speech API ูุฏ ูุณุชุฎุฏู ุฎุฏูุฉ ุณุญุงุจูุฉ ูุชุญููู ุงูุตูุช ุฅูู ูุต
- ุงููุต ุงููุฑุณู ููุณูุฑูุฑ ูุชู ุชุดููุฑู ุนุจุฑ WebSocket (wss://)
- API Key ูุง ูุชู ุฅุฑุณุงูู ูููุงุฌูุฉ ุงูุฃูุงููุฉ

### ูููุฏ ุงููููุฐุฌ | Model Limitations

- ุงูุฑูุจูุช ูุชุฎุตุต ููุท ูู ููุฏุณุฉ ุงููุนูููุงุชูุฉ ูุนููู ุงูุญุงุณุจ
- ุงูุฃุณุฆูุฉ ุฎุงุฑุฌ ุงููุทุงู ุณุชุญุตู ุนูู ุงุนุชุฐุงุฑ ูุชูุฌูู
- ูุฏุฉ ุงูุฑุฏ ุชุนุชูุฏ ุนูู ุทูู ุงูุณุคุงู ูุณุฑุนุฉ ุงูุดุจูุฉ

## ๐ ูููู ุงููุดุฑูุน | Project Structure

```
bot_it/
โโโ backend/
โ   โโโ config.js           # ุงูุฅุนุฏุงุฏุงุช ูุงููุชุบูุฑุงุช
โ   โโโ server.js           # WebSocket Server
โ   โโโ gemini-live-client.js   # ุนููู Gemini Live API
โ   โโโ gemini-handler.js   # ุฏูุงู ูุณุงุนุฏุฉ
โ   โโโ audio-processor.js  # ูุนุงูุฌุฉ ุงูุตูุช (ูุฏูู)
โโโ frontend/
โ   โโโ index.html          # ูุงุฌูุฉ ุงููุณุชุฎุฏู
โ   โโโ styles.css          # ุงูุชูุณููุงุช
โ   โโโ app.js              # ุงูููุทู ุงูุฑุฆูุณู
โ   โโโ pcm-processor.js    # ูุนุงูุฌ PCM (ูุฏูู)
โโโ .env                    # ูุชุบูุฑุงุช ุงูุจูุฆุฉ (ุฃูุดุฆู ูู .env.example)
โโโ .env.example            # ูุซุงู ุนูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
โโโ package.json            # ููุชุจุงุช Node.js
โโโ README.md               # ูุฐุง ุงูููู
```

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก | Troubleshooting

### ุงููุดููุฉ: "Web Speech API not supported"

**ุงูุญู:** ุงุณุชุฎุฏู Google Chrome ุฃู Microsoft Edge

### ุงููุดููุฉ: "Failed to connect to Gemini Live API"

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุตุญุฉ GOOGLE_CLOUD_API_KEY ูู `.env`
2. ุชุฃูุฏ ูู ุชูุนูู Generative Language API ูู Google Cloud Console
3. ุชุญูู ูู ุงุชุตุงูู ุจุงูุฅูุชุฑูุช

### ุงููุดููุฉ: "ูู ูุชู ูุดู ูููุฉ ุฑูุจูุช"

**ุงูุญู:** ุชุฃูุฏ ูู ุจุฏุก ุฌููุชู ุจูููุฉ "ุฑูุจูุช" ุจูุถูุญ

### ุงููุดููุฉ: ุงูุตูุช ูุง ูุนูู

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฑูุน ูุณุชูู ุงูุตูุช ูู ุฌูุงุฒู
2. ุชุฃูุฏ ูู ููุญ ุฅุฐู ุงููููุฑูููู ูููุชุตูุญ
3. ุชุญูู ูู Console ุงููุชุตูุญ ููุฃุฎุทุงุก

## ๐ ุงูุชุฑุฎูุต | License

MIT License

## ๐ค ุงููุณุงููุฉ | Contributing

ุงููุณุงููุงุช ูุฑุญุจ ุจูุง! ุงูุฑุฌุงุก ูุชุญ Issue ุฃู Pull Request.

---

**ุตููุน ุจู โค๏ธ ุจุงุณุชุฎุฏุงู Gemini Live API ู Web Speech API**
# robot_it
